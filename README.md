# Проект для работы с данными ЕГРЮЛ (Тюмень)

## Описание проекта

Программа на Python, которая:
- Загружает архив с Единого государственного реестра юридических лиц с сайта: [ссылка на архив](https://ofdata.ru/open-data/download/egrul.json.zip).
- Извлекает компании, занимающиеся разработкой программного обеспечения.
- Фильтрует компании, зарегистрированные в Тюмени.
- Сохраняет информацию о таких компаниях (название, ОКВЭД, ИНН, КПП, адрес) в БД.

## Основные функции

- **Асинхронная работа**: Программа работает асинхронно для ускорения скачивания и обработки данных.
- **Массовая вставка данных**: Используется для уменьшения количества запросов в базу и увеличения скорости.

## Шаги выполнения

1. **Загрузка ZIP файла**: Программа проверяет наличие архива на диске, скачивает при необходимости.
2. **Обработка ZIP файла**: Открытие и чтение JSON файлов внутри архива.
3. **Фильтрация данных**: Отбор компаний с ОКВЭД, начинающимся на 62, и зарегистрированных в Тюмени.
4. **Сохранение данных**: Вставка данных в базу PostgreSQL с обновлением при необходимости.

## Технологии

- **Python 3.8+**
- **SQLAlchemy** – для взаимодействия с базой данных PostgreSQL.
- **Aiohttp** – для асинхронной загрузки файлов.
- **Aiofiles** – для асинхронной работы с файловой системой.
- **Zipfile** – для работы с ZIP-архивами.
- **Ijson** – для потоковой обработки больших JSON-файлов.
- **Logging** – для ведения логов и отслеживания работы программы.

## Установка и запуск

1. Клонируйте репозиторий:

    ```bash
    git clone https://github.com/your-username/your-repository.git
    ```

2. Установите зависимости:

    ```bash
    pip install -r requirements.txt
    ```

3. Настройте параметры подключения к БД в файле конфигурации.

4. Запустите программу:

    ```bash
    python main.py
    ```

## Оптимизация

- **Асинхронные задачи** для работы с базой данных и обработки файлов.
- **Батчирование** для ускоренной обработки данных.
- **Логирование** для отслеживания и анализа действий программы.